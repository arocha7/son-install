---
# tasks file for nginx

- name: Installing NGINX
  include: "{{ ansible_os_family }}.yml"

# Starting NGINX

- name: start NGINX !!!
  service: name=nginx state=started enabled=yes

# Upload content

- name: copy www content
  include: copy-www-content.yml
  notify:
  - restart nginx

# Open FW ports

- name: open NGINX ports
  firewalld:
    port: "{{ svc_port }}"/tcp
    permanent: true
    state: enabled
  notify: reload firewall
  when: ansible_os_family == "RedHat"

- name: open NGINX port at FW
  ufw:
    state: enabled
    rule: allow
    port: "{{ svc_port }}"
    proto: tcp
  notify: reload firewall
  when: ansible_os_family == "Debian"

