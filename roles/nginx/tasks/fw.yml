
# CENTOS/REDHAT

- name: installing Firewalld package
  yum: name=firewalld state=latest update_cache=yes
  when: ansible_os_family == "RedHat"

- name: start 'firewall' service
  service: name=firewalld state=started enabled=yes
  when: ansible_os_family == "RedHat"

- name: open NGINX default port (80)
  firewalld:
    port: 80/tcp
    permanent: true
    state: enabled
  notify: reload firewall
  when: ansible_os_family == "RedHat"


# UBUNTU/DEBIAN

- name: start 'firewall' service
  service: name=ufw state=started
  when: ansible_os_family == "Debian"

- name: open NGINX port at FW
  ufw:
    state: enabled
    rule: allow
    port: 80
    proto: tcp
  notify: reload firewall
  when: ansible_os_family == "Debian"

