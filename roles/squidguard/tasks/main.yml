# tasks file for squidguard
---

- name: install 'libdb'
  yum: name=libdb-devel state=present
  when: ansible_distribution == "CentOS"

- name: install 'libdb'
  apt: name=libdb-dev state=present
  when: ansible_distribution == "Ubuntu"


- name: install 'squidguard' to CentOS 7
  yum: name=squidGuard state=present
  when: ansible_distribution == "CentOS"

- name: install 'squidguard' to Ubuntu
  apt: name=squidguard state=present
  when: ansible_distribution == "Ubuntu"


- name: unarchiving MESD BlackList tarball (freely available) for SquidGuard
  unarchive:
    src: "http://squidguard.mesd.k12.or.us/blacklists.tgz"
    dest: "/usr/local/squidGuard/db"
    remote_src: true

- name: initialize blacklist (convert file to DB)
  shell: '/usr/bin/squidGuard -C all'
