
# local package cache and EPEL already solved by 'common' role

- name: installing SQUID proxy server on CentOS 7
  package:
    name: squid
    state: latest

# preserve original config file
- fetch:
    src: /etc/squid/squid.conf
    dest: /tmp/squid.conf
    flat: yes
- copy:
    src: /tmp/squid.conf
    dest: /etc/squid/squid.conf.ORIG
    owner: root
    group: root
    mode: 0640

- name: setting your specific configuration
  copy:
    remote_src: true
    src: squid.conf
    dest: /etc/squid/squid.conf

- name: start SQUID service
  service: name=squid state=start enabled=yes


