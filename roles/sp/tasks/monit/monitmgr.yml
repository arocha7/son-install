  - name: MONIT MANAGER - running Docker containers
    docker_container:
      name: son-monitor-manager
      image: sonatanfv/son-monitor-manager
      state: started
      networks:
        - name: bridge
          aliases: monit-mgr
      published_ports: 8000:8000
      etc_hosts:
        mysql: "{{ ansible_default_ipv4.address }}"
        prometheus: "{{ ansible_default_ipv4.address }}"
      volumes:
        - "/tmp/monitoring/mgr:/var/log/apache2"
        - /var/log/sonata/monitor-manager:/var/log/monitor-manager
      log_driver: syslog # gelf

  - wait_for: host=0.0.0.0 port=8000 timeout=30 delay=10 state=started

