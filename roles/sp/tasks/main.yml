---
- name: Docker User Defined Network (SP)
  shell: 'docker network create --driver=bridge \
--subnet=172.20.2.0/24 --gateway=172.20.2.1 \
--ip-range=172.20.2.128/25 "{{ docker_network_name }}"'

- name: restart docker on Upstart (Ubuntu 14)
  service: name=docker state=restarted
  when: ansible_os_family == "Debian"

- name: restart docker on Systemd (Ubuntu 16 and CentOS 7)
  systemd: name=docker state=restarted daemon_reload=yes
  when: ansible_os_family == "RedHat"

# deploy RabbitMQ message bus
- include: broker.yml

# deploy postgreSQL database engine
- include: pgsql.yml

# deploy MongoDB (NoSQL) database engine
- include: mongo.yml

# deploy Repositories
- include: repos.yml

# deploy Gatekepper module
- include: gtk-all.yml

# deploy MANO framework
- include: mano-all.yml

# deploy Infastructure Adaptor
- include: ifta-all.yml

# deploy Monitoring
- include: monit-all.yml

# deploy Google cAdvisor
#- include: cadvisor.yml

# deploy Grafana
#- include: grafana.yml
