---

- name: deploying Infrastructure Abstractor WIM Adaptor (Docker container)
  docker_container:
    name: wim-adaptor
    image: sonatanfv/wim-adaptor
    state: started
    env:
      broker_host: "{{ ansible_default_ipv4.address }}"
      broker_uri: "amqp://guest:guest@{{ ansible_default_ipv4.address }}:5672/%2F"
      repo_host: "{{ ansible_default_ipv4.address }}"
      repo_port: "5432"
      repo_user: "sonatatest"
      repo_pass: "sonata"
    networks:
      - name: bridge
    volumes:
      - /var/log/sonata/ifta-wim:/var/log/ifta-wim
    log_driver: syslog # gelf

