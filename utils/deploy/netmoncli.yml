---
- name: 
  hosts: "{{ target }}"
  connection: ssh
  become: true

#1. Overall bandwidth - nload, bmon, slurm, bwm-ng, cbm, speedometer, netload
#2. Overall bandwidth (batch style output) - vnstat, ifstat, dstat, collectl
#3. Bandwidth per socket connection - iftop, iptraf, tcptrack, pktstat, netwatch, trafshow
#4. Bandwidth per process - nethogs
#   https://linoxide.com/monitoring-2/network-monitoring-tools-linux/

  tasks:
    - name: NLOAD
      package:
        name: nload
        state: present

    - name: IFTOP
      package:
        name: iftop
        state: present

    - name: IPTRAF
      package:
        name: iptraf
        state: present
    - name: IPTRAFNG
      package:
        name: iptraf-ng
        state: present

    - name: NETHOGS
      package:
        name: nethogs
        state: present

    - name: BMON
      package:
        name: bmon
        state: present

    - name: SLURM
      package:
        name: slurm
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    - name: TCPTRACK
      package:
        name: tcptrack
        state: present
    # CentOS7: http://packages.psychotic.ninja/7/base/x86_64/RPMS//tcptrack-1.4.2-9.el7.psychotic.x86_64.rpm

    - name: TCPFLOW
      package:
        name: tcpflow
        state: present

    - name: VNSTAT
      package:
        name: vnstat
        state: present

    - name: BWM-NG
      package:
        name: bwm-ng
        state: present

    - name: CBM
      package:
        name: cbm
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    - name: SPEEDOMETER
      package:
        name: speedometer
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    - name: PKTSTAT
      package:
        name: pktstat
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    - name: NETDIAG (NetWatch + TrafShow + NetLoad)
      package:
        name: netdiag
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    - name: IFSTAT
      package:
        name: ifstat
        state: present

    - name: dstat
      package:
        name: dstat
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"

    #  - name: COLLECTL
    #package:
    #  name: collectl
    #  state: present

    - name: etherape
      package:
        name: etherape
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali GNU/Linux"
#     http://linuxpitstop.com/install-graphical-network-monitor-etherape-on-ubuntu-linux-16/
#     https://centos.pkgs.org/7/forensics-x86_64/etherape-0.9.12-1.el7.x86_64.rpm.html
