---
- name: 
  hosts: "{{ target }}"
  connection: ssh
  become: true
#1. Overall bandwidth - nload, bmon, slurm, bwm-ng, cbm, speedometer, netload
#2. Overall bandwidth (batch style output) - vnstat, ifstat, dstat, collectl
#3. Bandwidth per socket connection - iftop, iptraf, tcptrack, pktstat, netwatch, trafshow
#4. Bandwidth per process - nethogs
  tasks:
    - name: NLOAD
      package:
        name: nload
        state: present

    - name: IFTOP
      package:
        name: iftop
        state: present

    - name: IPTRAF
      package:
        name: iptraf
        state: present
    - name: IPTRAFNG
      package:
        name: iptraf-ng
        state: present

    - name: NETHOGS
      package:
        name: nethogs
        state: present

    - name: BMON
      package:
        name: bmon
        state: present

    - name: SLURM
      package:
        name: slurm
        state: present

    - name: TCPTRACK
      package:
        name: tcptrack
        state: present

    - name: VNSTAT
      package:
        name: vnstat
        state: present

    - name: BWM-NG
      package:
        name: bwm-ng
        state: present

    - name: CBM
      package:
        name: bwm-ng
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali"

    - name: SPEEDOMETER
      package:
        name: speedometer
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali"

    - name: PKTSTAT
      package:
        name: pktstat
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali"

    - name: NETDIAG (NetWatch + TrafShow + NetLoad)
      package:
        name: netdiag
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali"

    - name: IFSTAT
      package:
        name: ifstat
        state: present

    - name: dstat
      package:
        name: dstat
        state: present
      when: ansible_os_family == "Debian" or ansible_os_family == "Kali"

    #  - name: COLLECTL
    #package:
    #  name: collectl
    #  state: present


